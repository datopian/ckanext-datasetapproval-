{% ckan_extends %}

{% block package_description %}
    {% if (c.pkg_dict.state  == "draft") %}
    <div class="alert alert-info" role="alert">
        <p>{% trans %}
            Your dataset is in draft. Ensure all details are correct before review. Click 'Send for Review' when ready, or if you wish to revisit and manage your dataset, click the 'Manage Dataset' button.
            {% endtrans %}</p>
        <div style="margin-top: 10px">
            <a href="{{ h.url_for('approval.review_action', id=c.pkg_dict.id, action='publish') }}" class="btn btn-primary">
                {% trans %}Send for Review{% endtrans %}
            </a>
            <a href="{{ h.url_for('dataset.edit', id=c.pkg_dict.id) }}" class="btn btn-secondary" style="margin-left: 10px;">
                {% trans %}Manage Dataset{% endtrans %}
            </a>
        </div> 
    </div>
    {% endif %}
    
    {% if (c.pkg_dict.state  == "inreview") and h.check_access("dataset_review",{"dataset_id":c.pkg_dict.id }) %}
    <div class="alert alert-warning" role="alert">
    <p>{% trans %}This dataset is waiting for an administrator approval.{% endtrans %}</p>
    <div style="margin-top: 10px">
        <a href="{{ h.url_for('approval.review_action', id=c.pkg_dict.id, action='approve') }}" class="btn btn-primary">
        {% trans %}Approve Dataset{% endtrans %}
        </a>
        <a href="{{ h.url_for('approval.review_action', id=c.pkg_dict.id, action='reject') }}"class="btn btn-danger">
        {% trans %}Reject Dataset{% endtrans %}
        </a>
    </div>    
    </div>  
    {% elif  c.pkg_dict.state == "inreview" and h.is_dataset_owner(c.pkg_dict, c.userobj.id) %}
    <div class="alert alert-warning" role="alert">
        <p>{{ _("This dataset is waiting for an administrator to review.") }}</p>    
    </div>
    {% endif %}
    {{ super() }}
{% endblock %}