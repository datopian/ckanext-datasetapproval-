{% ckan_extends %}

{% set user_roles = h.get_dataset_current_user_permissions(pkg_dict) %}
{% set user_can_write = user_roles.get("can_write", False) %}

{% block package_description %}
    {% if (c.pkg_dict.state  == "inreview") and h.check_access("dataset_review",{"dataset_id":c.pkg_dict.id }) %}
    <div class="alert alert-warning" role="alert">
    <p>{% trans %}This dataset is waiting for an administrator approval.{% endtrans %}</p>
    <div style="margin-top: 10px">
        <a href="{{ h.url_for('approval.review_action', id=c.pkg_dict.id, action='approve') }}" class="btn btn-primary">
        {% trans %}Approve Dataset{% endtrans %}
        </a>
        <a href="{{ h.url_for('approval.review_action', id=c.pkg_dict.id, action='reject') }}"class="btn btn-danger">
        {% trans %}Reject Dataset{% endtrans %}
        </a>
    </div>    
    </div>  

    {% elif  c.pkg_dict.state == "inreview" and user_can_write %}
    <div class="alert alert-warning" role="alert">
        <p>{{ _("This dataset is waiting for an administrator to review.") }}</p>    
    </div>
    {% endif %}
    {{ super() }}
{% endblock %}
